<div class="container">
  <h2>Desempenho dos Fornecedores</h2>

  <div *ngIf="relatorio?.length && relatorio.length > 0; else vazio" class="tabela-container">
    <table class="tabela-desempenho">
      <thead>
      <tr>
        <th>Fornecedor</th>
        <th>ReputaÃ§Ã£o Antes</th>
        <th>ReputaÃ§Ã£o Depois</th>
        <th>Score Antes</th>
        <th>Score Depois</th>
        <th>TendÃªncia</th>
        <th>AnÃ¡lise</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let item of relatorio"
          [ngClass]="{
              'melhorou': item.tendencia_nova === 'Melhorou',
              'piorou': item.tendencia_nova === 'Piorou',
              'estavel': item.tendencia_nova === 'EstÃ¡vel'
            }">

        <td>{{ item.fornecedor }}</td>
        <td>{{ item.reputacao_antes | number:'1.2-2' }}</td>
        <td>{{ item.reputacao_depois | number:'1.2-2' }}</td>
        <td>{{ item.score_antes | number:'1.0-0' }}</td>
        <td>{{ item.score_depois | number:'1.0-0' }}</td>

        <td>
          <ng-container [ngSwitch]="item.tendencia_nova">
            <span *ngSwitchCase="'Melhorou'" class="melhorou">ğŸ“ˆ Melhorou</span>
            <span *ngSwitchCase="'Piorou'" class="piorou">ğŸ“‰ Piorou</span>
            <span *ngSwitchDefault class="estavel">â¸ï¸ EstÃ¡vel</span>
          </ng-container>
        </td>

        <td>{{ item.analise_textual || '-' }}</td>
      </tr>
      </tbody>
    </table>
  </div>

  <ng-template #vazio>
    <p class="mensagem-vazia">Nenhum dado encontrado.</p>
  </ng-template>
</div>
